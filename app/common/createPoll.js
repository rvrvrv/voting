'use strict';$(document).ready(function(){function a(a){if(a.forEach(function(a){return a.value=a.value.trim()}),4>a[0].value.length)return alert('Please enter a valid poll question.'),'fail';for(var b=1;b<a.length;b++)if(1>a[b].value.length)return alert('Poll choice '+b+' is invalid.'),'fail';return a}function b(a){$.post('/api/:id/loadOne/',a).done(function(){$('.title-text').html('Poll Created!'),setTimeout(function(){return window.location.replace('/')},1500)}).fail(function(){alert('An error has occurred. Please try again.'),$('.btn-save').prop('disabled',!1)})}$('.btn-add').click(function(){$('.create-poll').append('<tr><th></th><td><input input type="text" name="choice" placeholder="New Choice"></td></tr>')}),$('.btn-rm').click(function(){3<$('.create-poll tr').length&&$('.create-poll tr:last').remove()}),$('.btn-save').click(function(){$('.btn-save').prop('disabled',!0);var c=$('.newPoll').serializeArray();if(c=a(c),'fail'===c)return void $('.btn-save').prop('disabled',!1);for(var d={creator:window.localStorage.getItem('rv-voting-userId'),title:c[0].value,choices:[]},e=1;e<c.length;e++)d.choices.push({text:c[e].value});b(d)})});