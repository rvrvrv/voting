'use strict';$(document).ready(function(){function a(a){$('#noVotes').hide(),j+='|'+f,g?localStorage.setItem(g,j):localStorage.setItem('anonVotes',j),ajaxFunctions.ajaxRequest('PUT',h+'/'+a,function(){ajaxFunctions.ajaxRequest('GET',h,b)})}function b(a){e&&e.destroy(),k=JSON.parse(a),e=new Chart(i,k),k.data.datasets[0].data.every(function(a){return 0===a})&&$('#noVotes').show(),$('#choices').html(''),k.data.labels.forEach(function(a){$('#choices').append('<option value="'+a+'">'+a+'</option>')})}function c(a){confirm('Please confirm you would like to add the following option:\n\n'+a)&&ajaxFunctions.ajaxRequest('POST',h+'/'+a,function(){ajaxFunctions.ajaxRequest('GET',h,b)})}function d(a){var b=a.trim(),d=k.data.labels.map(function(a){return a.toLowerCase()});return''==b||'Your choice'==b||d.includes(b.toLowerCase())?alert('Please enter a valid choice.'):c(b)}var e,f=location.pathname.slice(6),g=localStorage.getItem('rv-voting-userId')||null,h='/api/:id/loadPoll/'+f,i=$('#chart'),j=localStorage.getItem(g)||localStorage.getItem('anonVotes')||'',k={};$('#addChoiceBtn').click(function(){if(g)var a=prompt(k.options.title.text+'\n\nAdd a new choice below:','Your choice');a&&d(a)}),$('#voteBtn').click(function(){var b=$('#choices').val();return j.includes(f)?alert('You have already voted on this poll.'):void(confirm('Please confirm your vote for: '+b)&&a(b))}),ajaxFunctions.ready(ajaxFunctions.ajaxRequest('GET',h,b))});