'use strict';var path=process.cwd(),ClickHandler=require(path+'/app/controllers/clickHandler.server.js');module.exports=function(a,b){function c(a,b,c){return a.isAuthenticated()?c():b.redirect('/login')}var d=new ClickHandler;a.route('/').get(c,function(a,b){return b.sendFile(path+'/public/index.html')}),a.route('/create').get(c,function(a,b){return b.sendFile(path+'/public/create.html')}),a.route('/profile').get(c,function(a,b){return b.sendFile(path+'/public/profile.html')}),a.route('/api/:id').get(c,function(a,b){return b.json(a.user.github)}),a.route('/login').get(function(a,b){return b.sendFile(path+'/public/login.html')}),a.route('/logout').get(function(a,b){a.logout(),b.redirect('/login')}),a.route('/auth/github').get(b.authenticate('github')),a.route('/auth/github/callback').get(b.authenticate('github',{successRedirect:'/',failureRedirect:'/login'})),a.route('/poll/:pollId').get(function(a,b){return b.sendFile(path+'/public/poll.html')}),a.route('/api/:id/loadPoll/:pollId/:choice?').get(function(a,b){d.showPoll(a.params.pollId,b)}).post(function(a,b){d.addChoice(a.params.pollId,a.params.choice,b)}).put(function(a,b){d.vote(a.params.pollId,a.params.choice,b)}),a.route('/api/:id/load').get(d.getAllPolls),a.route('/api/:id/loadOne/:del?').get(c,d.getUserPolls).post(c,d.createPoll).delete(c,function(a,b){d.deletePoll(a.user.github.id,a.params.del,b)})};